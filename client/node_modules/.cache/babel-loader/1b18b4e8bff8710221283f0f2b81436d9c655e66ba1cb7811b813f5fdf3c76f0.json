{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport { getFollowedChannels, getChannels as getChannelsRequest } from \"../../api\";\nexport const useChannels = () => {\n  _s();\n  const [channelsData, setChannelsData] = useState(null);\n  const getChannels = async (isLogged = false) => {\n    const channelsData = await getChannelsRequest();\n    if (channelsData.error) {\n      var _channelsData$excepti, _channelsData$excepti2;\n      return toast.error(((_channelsData$excepti = channelsData.exception) === null || _channelsData$excepti === void 0 ? void 0 : (_channelsData$excepti2 = _channelsData$excepti.response) === null || _channelsData$excepti2 === void 0 ? void 0 : _channelsData$excepti2.data) || \"Error occurred when fetching the channels\");\n    }\n    if (!isLogged) {\n      return setChannels({\n        channels: channelsData.data.channels\n      });\n    }\n    const followedChannelsData = await getFollowedChannels();\n    if (followedChannelsData.error) {\n      var _followedChannelsData, _followedChannelsData2;\n      return toast.error(((_followedChannelsData = followedChannelsData.exception) === null || _followedChannelsData === void 0 ? void 0 : (_followedChannelsData2 = _followedChannelsData.response) === null || _followedChannelsData2 === void 0 ? void 0 : _followedChannelsData2.data) || \"Error occurred when fetching the followed channels\");\n    }\n    setChannels({\n      channels: channelsData.data.channels,\n      followedChannels: channelsData.data.channels.filter(channel => followedChannelsData.data.followedChannels.includes(channel.id))\n    });\n  };\n  useEffect(() => {\n    console.log(channels);\n  }, [channels]);\n  return {\n    getChannels,\n    isFetching: !Boolean(channels)\n  };\n};\n_s(useChannels, \"Nw01v4fGasxcB2njr3JPWieNNv8=\");","map":{"version":3,"names":["useState","useEffect","toast","getFollowedChannels","getChannels","getChannelsRequest","useChannels","_s","channelsData","setChannelsData","isLogged","error","_channelsData$excepti","_channelsData$excepti2","exception","response","data","setChannels","channels","followedChannelsData","_followedChannelsData","_followedChannelsData2","followedChannels","filter","channel","includes","id","console","log","isFetching","Boolean"],"sources":["F:/ProgramaciÃ³n/proyectos de nodeJS/twitch.tv/client/src/shared/hooks/useChannels.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport {\r\n    getFollowedChannels,\r\n    getChannels as getChannelsRequest,\r\n} from \"../../api\";\r\n\r\nexport const useChannels = () => {\r\n    const [channelsData, setChannelsData] = useState(null);\r\n\r\n    const getChannels = async (isLogged = false) => {\r\n        const channelsData = await getChannelsRequest();\r\n\r\n        if (channelsData.error) {\r\n            return toast.error(\r\n            channelsData.exception?.response?.data ||\r\n                \"Error occurred when fetching the channels\"\r\n            );\r\n        }\r\n        \r\n        if (!isLogged) {\r\n            return setChannels({\r\n            channels: channelsData.data.channels,\r\n            });\r\n        }\r\n\r\n        const followedChannelsData = await getFollowedChannels();\r\n\r\n        if (followedChannelsData.error) {\r\n            return toast.error(\r\n                followedChannelsData.exception?.response?.data ||\r\n                \"Error occurred when fetching the followed channels\"\r\n            );\r\n        }\r\n\r\n        setChannels({\r\n            channels: channelsData.data.channels,\r\n            followedChannels: channelsData.data.channels.filter((channel) =>\r\n                followedChannelsData.data.followedChannels.includes(channel.id)\r\n            ),\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        console.log(channels);\r\n    }, [channels]);\r\n\r\n    return {\r\n        getChannels,\r\n        isFetching: !Boolean(channels),\r\n\r\n    };\r\n};"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,KAAK,QAAQ,iBAAiB;AACvC,SACIC,mBAAmB,EACnBC,WAAW,IAAIC,kBAAkB,QAC9B,WAAW;AAElB,OAAO,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC7B,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAEtD,MAAMI,WAAW,GAAG,MAAAA,CAAOM,QAAQ,GAAG,KAAK,KAAK;IAC5C,MAAMF,YAAY,GAAG,MAAMH,kBAAkB,CAAC,CAAC;IAE/C,IAAIG,YAAY,CAACG,KAAK,EAAE;MAAA,IAAAC,qBAAA,EAAAC,sBAAA;MACpB,OAAOX,KAAK,CAACS,KAAK,CAClB,EAAAC,qBAAA,GAAAJ,YAAY,CAACM,SAAS,cAAAF,qBAAA,wBAAAC,sBAAA,GAAtBD,qBAAA,CAAwBG,QAAQ,cAAAF,sBAAA,uBAAhCA,sBAAA,CAAkCG,IAAI,KAClC,2CACJ,CAAC;IACL;IAEA,IAAI,CAACN,QAAQ,EAAE;MACX,OAAOO,WAAW,CAAC;QACnBC,QAAQ,EAAEV,YAAY,CAACQ,IAAI,CAACE;MAC5B,CAAC,CAAC;IACN;IAEA,MAAMC,oBAAoB,GAAG,MAAMhB,mBAAmB,CAAC,CAAC;IAExD,IAAIgB,oBAAoB,CAACR,KAAK,EAAE;MAAA,IAAAS,qBAAA,EAAAC,sBAAA;MAC5B,OAAOnB,KAAK,CAACS,KAAK,CACd,EAAAS,qBAAA,GAAAD,oBAAoB,CAACL,SAAS,cAAAM,qBAAA,wBAAAC,sBAAA,GAA9BD,qBAAA,CAAgCL,QAAQ,cAAAM,sBAAA,uBAAxCA,sBAAA,CAA0CL,IAAI,KAC9C,oDACJ,CAAC;IACL;IAEAC,WAAW,CAAC;MACRC,QAAQ,EAAEV,YAAY,CAACQ,IAAI,CAACE,QAAQ;MACpCI,gBAAgB,EAAEd,YAAY,CAACQ,IAAI,CAACE,QAAQ,CAACK,MAAM,CAAEC,OAAO,IACxDL,oBAAoB,CAACH,IAAI,CAACM,gBAAgB,CAACG,QAAQ,CAACD,OAAO,CAACE,EAAE,CAClE;IACJ,CAAC,CAAC;EACN,CAAC;EAEDzB,SAAS,CAAC,MAAM;IACZ0B,OAAO,CAACC,GAAG,CAACV,QAAQ,CAAC;EACzB,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC;EAEd,OAAO;IACHd,WAAW;IACXyB,UAAU,EAAE,CAACC,OAAO,CAACZ,QAAQ;EAEjC,CAAC;AACL,CAAC;AAACX,EAAA,CA7CWD,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}